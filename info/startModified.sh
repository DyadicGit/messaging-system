IP=$(grep "\s${HOSTNAME}$" /etc/hosts | head -n 1 | awk '{print $1}')
ZOOKEEPER_CONNECTION_STRING="${ZOOKEEPER_IP}:${ZOOKEEPER_PORT:-2181}"
KAFKA_ADVERTISED_HOST_NAME="just a foo"
echo "1#"$ZOOKEEPER_CONNECTION_STRING
echo "#s|{{KAFKA_ADVERTISED_HOST_NAME}}|${KAFKA_ADVERTISED_HOST_NAME:-$IP}|g"
echo "#KAFKA_ADVERTISED_HOST_NAME=${KAFKA_ADVERTISED_HOST_NAME} ${KAFKA_ADVERTISED_HOST_NAME:-$IP}"
echo "#KAFKA_ADVERTISED_PORT=${KAFKA_ADVERTISED_PORT}"
echo "#KAFKA_AUTO_CREATE_TOPICS_ENABLE=${KAFKA_AUTO_CREATE_TOPICS_ENABLE} ${KAFKA_AUTO_CREATE_TOPICS_ENABLE:-true}"
echo "#${KAFKA_BROKER_ID}${KAFKA_BROKER_ID:-0}" 
echo "#${KAFKA_DEFAULT_REPLICATION_FACTOR} ${KAFKA_DEFAULT_REPLICATION_FACTOR:-1}"
echo "#${KAFKA_DELETE_TOPIC_ENABLE} ${KAFKA_DELETE_TOPIC_ENABLE:-false}"
echo "#${KAFKA_DELETE_TOPIC_ENABLE} ${KAFKA_DELETE_TOPIC_ENABLE:-false}"
echo "#${KAFKA_GROUP_MAX_SESSION_TIMEOUT_MS} ${KAFKA_GROUP_MAX_SESSION_TIMEOUT_MS:-300000}"
echo "#${KAFKA_LOG_RETENTION_HOURS} ${KAFKA_LOG_RETENTION_HOURS:-168}"
echo "#${KAFKA_NUM_PARTITIONS} ${KAFKA_NUM_PARTITIONS:-1}"
echo "#${KAFKA_REPLICATION_FACTOR} ${KAFKA_REPLICATION_FACTOR:-1}"
echo "#${KAFKA_PORT} ${KAFKA_PORT:-9092}"
echo "#${ZOOKEEPER_CHROOT} ${ZOOKEEPER_CHROOT:-}"
echo "#${ZOOKEEPER_CONNECTION_STRING} ${ZOOKEEPER_CONNECTION_STRING}"
echo "#${ZOOKEEPER_CONNECTION_TIMEOUT_MS} ${ZOOKEEPER_CONNECTION_TIMEOUT_MS:-10000}"
echo "#${ZOOKEEPER_SESSION_TIMEOUT_MS} ${ZOOKEEPER_SESSION_TIMEOUT_MS:-10000}"
echo "#${KAFKA_MESSAGE_MAX_BYTES} ${KAFKA_MESSAGE_MAX_BYTES:-1000012}"
echo "#${KAFKA_REPLICA_FETCH_MAX_BYTES} ${KAFKA_REPLICA_FETCH_MAX_BYTES:-1048576}" > ./config/server.properties
echo "Starting kafka"